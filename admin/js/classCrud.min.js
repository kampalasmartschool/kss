function beforeSubmitAdd(){var s={};$("#addNewClassForm #className").val(),$("#addNewClassForm #shortClassName").val(),$("#addNewClassForm #classDescription").val(),$("#addNewClassForm #classLogo").val(),$("#addNewClassForm #addNewClassBtn");$(".classNameLabel").text("Class Name"),$(".shortClassNameLabel").text("Short Class Name"),$(".classDescription").text("Class Description"),$(".classLogoLabel").text("Class Logo"),$("label").removeClass("text-danger"),minmax(3,20,"#addNewClassForm #className","Class Name is Invalid","#addNewClassForm .classNameLabel")&&minmax(3,5,"#addNewClassForm #shortClassName","This is not a valid Short Class Name","#addNewClassForm .shortClassNameLabel")&&minmax(5,100,"#addNewClassForm #classDescription","This is not a valid Class Description","#addNewClassForm .classDescriptionLabel")?s.status=!0:s.status=!1;var a={};return s.postdata=a,s}function callBackMethod(s){$("#addNewClassForm")[0].reset(),getAllClasses(),notify("Class successfully added","success")}function getAllClasses(s){var a={async:!0,type:"GET",crossDomain:!0,dataType:"json",url:"../api/classes/tutor/logged_in",headers:{"cache-control":"no-cache"}};$.ajax(a).success(function(a){console.log(JSON.stringify(a)),$(".classList").html("");var e="";$.each(a,function(a,l){e+="<tr><td>"+l.class_id+"</td><td>"+l.short_class_name+"</td><td>"+l.class_name+"</td><td>"+l.enrollments+"</td><td><div class='btn-group btn-group-xs'><button class='btn btn-primary indClass' value='"+l.class_id+"' data-target='#editClass' data-toggle='modal'><span class='fa fa-edit'> </span> Edit</button><button value='"+l.class_id+"' class='indClassDel btn btn-danger' data-target='#deleteClass' data-toggle='modal'><span class='fa fa-trash'></span></button></div></td></tr>",0==s&&$(".classList button").hide()}),$(".classList").html(e),$(".indClass").click(function(s){s.preventDefault();var a=$(this).attr("value");editClass(a)}),$(".indClassDel").click(function(s){s.preventDefault();var a=$(this).attr("value");delClass(a)})})}function editClass(s){function a(s){getAllClasses(),notify("Class Details Updated","success")}function e(){var s={};$("#editClassForm #className").val(),$("#editClassForm #shortClassName").val(),$("#editClassForm #classDescription").val(),$("#editClassForm #classLogo").val(),$("#editClassForm #addNewClassBtn");$(".classNameLabel").text("Class Name"),$(".shortClassNameLabel").text("Short Class Name"),$(".classDescription").text("Class Description"),$(".classLogoLabel").text("Class Logo"),$("label").removeClass("text-danger"),minmax(3,20,"#editClassForm #className","Class Name is Invalid","#editClassForm .classNameLabel")&&minmax(3,5,"#editClassForm #shortClassName","This is not a valid Short Class Name","#editClassForm .shortClassNameLabel")&&minmax(5,100,"#editClassForm #classDescription","This is not a valid Class Description","#editClassForm .classDescriptionLabel")?s.status=!0:s.status=!1;var a={};return s.postdata=a,s}var l={async:!0,dataType:"json",type:"GET",url:"../api/classes/"+s,headers:{"cache-control":"no-cache"}};$.ajax(l).success(function(s){$.each(s,function(s,a){$("#editClass #editClassForm #className").val(a.class_name),$("#editClass #editClassForm #shortClassName").val(a.short_class_name),$("#editClass #editClassForm #classDescription").val(a.description),$("#editClass #editClassForm .pic").attr("src",a.class_pic)})}),$("#editClass #editClassForm .img-avail").show(),$("#editClass #editClassForm .img-upload").hide(),$("#editClass #editClassForm .removeImg").show(),$("#editClass #editClassForm .cancelRemoveImg").hide(),$("#editClass #editClassForm .img-upload").hide(),$("#editClass #editClassForm .cancelRemoveImg").hide(),$("#editClass #editClassForm .img-upload #classLogoEdit").val(""),$("#editClass #editClassForm .removeImg").click(function(){$("#editClass #editClassForm .img-avail").hide(),$("#editClass #editClassForm .img-upload").slideDown(),$("#editClass #editClassForm .removeImg").hide(),$("#editClass #editClassForm .cancelRemoveImg").fadeIn(),$("#editClass #editClassForm .cancelRemoveImg").click(function(){$("#editClass #editClassForm .img-avail").fadeIn(),$("#editClass #editClassForm .img-upload").hide(),$("#editClass #editClassForm .img-upload #classLogoEdit").val(""),$("#editClass #editClassForm .removeImg").fadeIn(),$("#editClass #editClassForm .cancelRemoveImg").hide()})}),$("#editClassForm").ajaxify({url:"../api/classes/edit/"+s,validator:e,onSuccess:a})}function delClass(s){$(".delBtn").click(function(){var a={type:"GET",async:!0,dataType:"json",url:"../api/classes/delete/"+s,headers:{"cache-control":"no-cache"}};$.ajax(a).success(function(s){console.log("Class Deleted Succesfully"),getAllClasses()})})}$(function(){var s=document.cookie.replace(/(?:(?:^|.*;\s*)adminType\s*\=\s*([^;]*).*$)|^.*$/,"$1");0==s&&$(".forAdminOnly").hide(),getAllClasses(s)}),$("#addNewClassForm").ajaxify({url:"../api/classes",validator:beforeSubmitAdd,onSuccess:callBackMethod});