function imageValid(e,t,o){var a=["image/jpeg","image/png","image/jpg"];$(e).change(function(){var e=this.files[0],n=e.type;return n!==a[0]&&n!==a[1]&&n!==a[2]?($(o).text(t),$(o).addClass("text-danger"),!1):($(o).text("Class Logo/ Image"),void $(o).removeClass("text-danger"))})}function imageValido(e){var t=["image/jpeg","image/png","image/jpg"];$(e).change(function(){var o=this.files[0],a=o.type,n=o.size,s=Math.round(n/1024);return a!==t[0]&&a!==t[1]&&a!==t[2]?(notify("File uploaded in not an image","error"),$(e).val(""),!1):s>500?($(e).val(""),notify("Image is large, (it should be less than 500Kbs)","error"),!1):($(".notification").hide(),!0)})}function minmax(e,t,o,a,n){var s=$(o).val();return!(s.length<e||s.length>t)||($(o).focus(),$(n).text(a),$(n).addClass("text-danger"),!1)}function minMax_a(e,t,o,a){var n=$(o).val();return!(n.length<e||n.length>t)||($(o).focus(),notify(a,"error"),!1)}function selectValid(e,t,o){var a=$(e).val();return"0"!==a||($(e).focus(),$(o).text(t),$(o).addClass("text-danger"),!1)}function selectValid_new(e,t){var o=$(e).val();return"0"!==o||($(e).focus(),notify(t,"error"),!1)}function imageErrorFix(){$("img").error(function(){$(this).attr("src","../images/default_image.jpg")})}function notify(e,t){$(".notification").hide(),"error"===t?mType="#errorNot":"success"===t?mType="#successNot":"warning"===t?mType="#warnNot":console.log("Error on Notify Plugin (var type)"),$(mType).slideDown(function(){$(mType+" p").text(""),$(mType+" p").text(e),$(mType).click(function(){$(this).slideUp()}),setTimeout(function(){$(mType).slideUp()},4e4)})}function initFilter(e){var t={type:"GET",async:!0,dataType:"json",url:"../api/classes/tutor/logged_in",headers:{"cache-control":"no-cache"}};$.ajax(t).success(function(t){if(t.length<0||0===t.length)$(e+" .classList").html(""),$(e+" .classList").append("<option selected value='0'>No classes avalible</option>");else if(t.length>0){$(e+" .classList").html("");var o="";$.each(t,function(e,t){o+="<option value='"+t.class_id+"'>"+t.class_name+"</option>"}),$(e+" .classList").html("<option value='0'>Select a Class</option>"),$(e+" .classList").append(o)}});$(e+" .classList").val();$("body").on("change",e+" .classList",function(){var t=$(this).val();$(e+" .subjectList").html(""),$(e+" .tutorList").html(""),$(e+" .topicList").html(""),$(e+" .lessonList").html(""),t>0?getSubjectsByClass(t,e):($(e+" .subjectList").html(""),$(e+" .subjectList").append("<option selected value='0'>No Subjects avalible</option>"),$(e+" .tutorList").html(""),$(e+" .tutorList").append("<option selected value='0'>No Tutors Avalible</option>"),$(e+" .unitList").html(""),$(e+" .unitList").append("<option selected value='0'>No Units avalible</option>"),$(e+" .topicList").html(""),$(e+" .topicList").append("<option selected value='0'>No Topics avalible</option>"))})}function getSubjectsByClass(e,t){var o={async:!0,dataType:"json",type:"GET",url:"../api/subjects/class/"+e,headers:{"cache-control":"no-cache"}};$.ajax(o).success(function(e){if(e.length<0||0===e.length)$(t+" .subjectList").html(""),$(t+" .subjectList").append("<option selected value='0'>No Subjects avalible</option>");else if(e.length>0){$(t+" .subjectList").html(""),$(t+" .subjectList").append("<option selected value='0'>Select a Subject</option>");var o="";$.each(e,function(e,t){o+="<option value='"+t.cs_id+"'>"+t.subject_name+"</option>"}),$(t+" .subjectList").html(o);var a=$(t+" .subjectList").val();a>0?($("#tutor").length&&getTutorBySubject(a),$("#UnitName").length&&getUnitsBySubject(a,t)):($(t+" .tutorList").html(""),$(t+" .tutorList").append("<option selected value='0'>No Tutors Avalible</option>"),$(t+" .unitList").html(""),$(t+" .unitList").append("<option selected value='0'>No Units avalible</option>"))}});$(t+" .subjectList").val();$("body").on("change",t+" .subjectList",function(){var e=$(this).val();e>0?($(t+" .tutorList").html(""),$(t+" .tutorList").html(""),getUnitsBySubject(e,t),$(".unitList").length&&($(".unitPage").length&&getAllUnits(isAdmin=1,e,term=0),$(".tutorList").length&&getTutorBySubject(e,t)),$("body").on("change",t+" .termList",function(){var t=parseInt($(this).val());t>0?getAllUnits(isAdmin=1,e,t):alert("No Units Availble")})):($(t+" .unitList").html(""),$(t+" .unitList").append("<option selected value='0'>No Units avalible</option>"))})}function getTutorBySubject(e,t){var o={async:!0,dataType:"json",type:"GET",url:"../api/tutor/class_subject/"+e,headers:{"cache-control":"no-cache"}};$.ajax(o).success(function(e){if(console.log(JSON.stringify(e)),e.length<0||0===e.length)$(t+" .tutorList").html(""),$(t+" .tutorList").append("<option selected value='0'>No Tutors Avalible</option>");else if(e.length>0){$(t+" .tutorList").html(""),$(t+" .tutorList").append("<option selected value='0'>Select a Tutor</option>");var o="";$.each(e,function(e,t){o+="<option class='sTutor' value="+t.tutor_id+">"+t.f_name+" "+t.l_name+"</option>"})}$(t+" .tutorList").html(o)})}function getUnitsBySubject(e,t){var o={async:!0,dataType:"json",type:"GET",url:"../api/units/subject/"+e,headers:{"cache-control":"no-cache"}};$.ajax(o).success(function(e){$(t+" .unitList").html(""),$(t+" .unitList").append("<option selected value='0'>Select a Unit</option>"),$.each(e,function(e,o){var a=o.themes;$.each(a,function(e,o){var a="<option class='sTutor' value="+o.theme_id+">"+o.theme_name+"</option>";$(t+" .unitList").append(a)})});var o=$(t+" .unitList").val();o>0?getTopicsByUnit(o):$(t+" .topicList").append("<option selected value='0'>No Topics avalible</option>"),$("body").on("change",t+" .unitList",function(){var e=$(this).val();$(t+" .topicList").html(""),e>0?(getTopicsByUnit(e,t),$(".topicPage").length&&getAllTopics(e)):($(t+" .topicList").html(),$(t+" .topicList").append("<option selected value='0'>No Topics avalible</option>"))})})}function getTopicsByUnit(e,t){var o={async:!0,dataType:"json",type:"GET",url:"../api/topics/theme/"+e,headers:{"cache-control":"no-cache"}};$.ajax(o).success(function(e){$(t+" .topicList").html(""),e.length<0||0===e.length?$(t+" .topicList").append("<option selected value='0'>No Topics avalible</option>"):e.length>0&&($(t+" .topicList").html(""),$(t+" .topicList").append("<option selected value='0'>Select a Topic</option>"),$.each(e,function(e,o){var a="<option class='' value="+o.topic_id+">"+o.topic_name+"</option>";$(t+" .topicList").append(a)}),$("body").on("change",t+" .topicList",function(){var e=$(this).val();e>0&&$(".lessonPage").length&&topical_lessons(e)}))})}function slideByLesson(e){$("#content-area").html("");var t="slides.php";$("#content-area").load(t,function(){sessionStorage.current_page=t,sessionStorage.active_lesson=e,$(".modal-backdrop").hide(),$(".modal").modal("hide"),getSlides(e)})}function activityByLesson(e){$("#content-area").html("");var t="activity.php";$("#content-area").load(t,function(){$(".modal-backdrop").hide(),$(".modal").modal("hide"),getActivities(e)})}NProgress.start(),$(document).ready(function(){if(NProgress.done(),"slides.php"==sessionStorage.current_page&&sessionStorage.active_lesson>0){var e=sessionStorage.active_lesson;$("#content-area").load("slides.php",function(){$(".loader").fadeOut(function(){$(".modal-backdrop").hide(),$(".modal").modal("hide"),getSlides(e)})}),$("#lessonLinked").addClass("activeSideLink")}else if("lessons.php"==sessionStorage.current_page&&sessionStorage.lastTopicById>0){var t=sessionStorage.lastTopicById;$("#content-area").load("lessons.php",function(){$(".loader").fadeOut(function(){$(".modal-backdrop").hide(),$(".modal").modal("hide"),paginate_lessons(idx=0,dir="",t)})}),$("#lessonLinked").addClass("activeSideLink")}else sessionStorage.current_page?$("#content-area").load(sessionStorage.current_page,function(){$(".loader").fadeOut(function(){$(".modal-backdrop").hide(),$(".modal").modal("hide")});var e=sessionStorage.current_link;$(".nav-side-links").removeClass("activeSideLink"),$("#"+e).addClass("activeSideLink")}):$("#content-area").load("classes.php",function(){$(".loader").fadeOut(function(){$(".modal-backdrop").fadeOut(),$(".modal").modal("hide"),$(".nav-side-links").removeClass("activeSideLink"),$("#classLink").addClass("activeSideLink")})});$(".nav-side-links").click(function(e){e.preventDefault();var t=$(this).attr("id");$(".nav-side-links").removeClass("activeSideLink"),$(this).addClass("activeSideLink"),$("#content-area").html("");var o=$(this).attr("href");$("#content-area").load(o,function(){sessionStorage.current_page=o,sessionStorage.current_link=t,$(".modal").modal("hide")})}),$(".togglesideNav").click(function(){$(".togglesideNav").hasClass("onActive")?($(".togglesideNav").removeClass("onActive"),$(".sideNavLeft").animate({width:"15%"},function(){$(".sm-text-rm").fadeIn()}),$(".mainBox").animate({width:"85%"})):($(".togglesideNav").addClass("onActive"),$(".sm-text-rm").hide(),$(".sideNavLeft").animate({width:"3.9%"}),$(".mainBox").animate({width:"96.1%"}))}),$("a#logout").click(function(){var e={method:"GET",url:"../api/admin/logout",headers:{"cache-control":"no-cache"}};$.ajax(e).done(function(){sessionStorage.current_page="",window.location.href="login.php"})}),$(document).ajaxSend(function(){$(".loader").fadeIn(),NProgress.configure({showSpinner:!0}),NProgress.start(),$("#nprogress .bar").css({background:"#00a1e0"}),$("#nprogress .peg").css({"box-shadow":"0 0 10px #00a1e0, 0 0 5px #00a1e0"}),$("#nprogress .spinner-icon").css({"border-top-color":"#fff","border-left-color":"#fff"})}),$(document).ajaxStart(function(){}),$(document).ajaxStop(function(){NProgress.done(),$(".loader").fadeOut()});var o=$("#loginForm #username").val(),a=$("#loginForm #password").val();$("#loginForm #username").on("keyup",function(e){$(".usernameLabel").hasClass("text-danger")||$("#loginForm #username").val().length>2?($(".usernameLabel").text("Username"),$(".usernameLabel").removeClass("text-danger")):o.length<3&&($(".usernameLabel").text("Incorect Username"),$(".usernameLabel").addClass("text-danger"))}),$("#loginForm #password").on("keyup",function(e){$(".passwordLabel").hasClass("text-danger")||$("#loginForm #password").val().length>5?($(".passwordLabel").text("Password"),$(".passwordLabel").removeClass("text-danger")):a.length<6&&($(".passwordLabel").text("Incorect Password"),$(".passwordLabel").addClass("text-danger"))}),$("#loginForm").submit(function(e){var t=$("#loginForm #username").val(),o=$("#loginForm #password").val();if(e.preventDefault(),t.length<3)return $("#loginForm #username").focus(),$(".usernameLabel").text("Incorect Username"),$(".usernameLabel").addClass("text-danger"),!1;if(o.length<6)return $("#loginForm #password").focus(),$(".passwordLabel").text("Incorect Password"),$(".passwordLabel").addClass("text-danger"),!1;$("#loginBtn").text("Loading...");var a=$(this).serialize(),n={type:"POST",dataType:"json",url:"../api/admin/login",headers:{"cache-control":"no-cache"},data:a};$("#loginForm .form-error").fadeOut(),$("#loginForm .form-success").fadeOut(),$.ajax(n).success(function(e){return $("#loginBtn").text("Loging in"),$("#loginForm .form-error").fadeIn(),"Failed"===e.status||"failed"===e.status?($("#loginBtn").text("Login"),$("#loginForm .form-error").text("Sorry "+e.message),!1):"Warning"===e.status?($("#loginBtn").text("Login"),$("#loginForm .form-error").text("Sorry "+e.message),!1):void("success"===e.status?($("#loginForm .form-success").text(e.message),$("#loginBtn").text("Login successfull"),window.location.href="index.php"):"Already Logged in"===e.message?($("#loginForm .form-success").text(e.message),$("#loginBtn").text("Loging in"),window.location.href="index.php"):$("#loginForm .form-success").text(e.message))})})});